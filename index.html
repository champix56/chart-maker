<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      href="data:image/png;base64,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"
    />

    <title>radhiesthesie charte maker</title>
    <style>
      body {
        height: 97vh;
      }
      .v-container {
        display: flex;
      }
      .v-container > * {
        height: calc(97vh - 80px);
      }
      .v-container > *:nth-child(1) * {
        max-width: calc(100% - 15px);
      }
      .v-container > *:nth-child(1) {
        width: 160px;
        text-align: center;
      }
      .v-container > *:nth-child(2) > svg {
        height: 100%;
      }
      .v-container > *:nth-child(2) {
        flex-grow: 1;
        text-align: center;
      }
      form {
        max-height: 100%;
        overflow-y: auto;
        overflow-x: hidden;
      }
      form ul li {
        border: 1px solid black;
        padding: 3px;
        margin-right: 5px;
        margin-bottom: 5px;
      }
      form ul li * {
        display: flex;
        align-content: space-evenly;
      }
      form ul {
        list-style: none;
        display: flex;
        flex-wrap: wrap;
        padding: 0;
        align-content: space-evenly;
      }
      #elementValue {
        margin-bottom: 5px;
      }
    </style>
    <!-- <link rel="stylesheet" href="./index.css"> -->
    <script src="./index.js"></script>
    <script>
      var elements = [];
      var isElementsSeparate = false;
      document.addEventListener("DOMContentLoaded", () => {
        loadEvents();
      });
      function loadEvents() {
        document.querySelector("form").addEventListener("submit", (evt) => {
          evt.preventDefault();
        });
        document.querySelector("#addValue").addEventListener("click", (evt) => {
          addElement(document.querySelector("#elementValue").value);
        });
        document
          .querySelector("#separator")
          .addEventListener("click", (evt) => {
            isElementsSeparate = evt.target.checked;
            redraw();
          });
        document
          .querySelector("#print-button")
          .addEventListener("click", (evt) => {
            var tab = window.open("about:blank", "_blank");
            tab.document.write(
              '<style type="text/css" media="print">@page { size: landscape; }</style>' +
                document.querySelector("svg").outerHTML
            ); // where 'html' is a variable containing your HTML
            tab.window.print(); // to finish loading the page
          });
        document
          .querySelector("#clear-button")
          .addEventListener("click", (evt) => {
            document.querySelector("#liste-elements").innerHTML = "";
            elements = [];
            redraw();
          });
        document.querySelector("#title").addEventListener("input", (evt) => {
          document.querySelector("#chart-name").innerHTML = evt.target.value;
        });
      }
      /**
       * add section in half circle
       * @param {string} value text value
       */
      function addElement(value) {
        console.log("add->" + value);
        elements.push(value);
        var ligne = document.createElement("tr");
        ligne.innerHTML =
          "<li>" + value + '<button type="button">X</button></li>';
        ligne.querySelector("button").addEventListener("click", (evt) => {
          for (var i = 0; i < elements.length; i++) {
            if (elements[i] === value) {
              elements.splice(i, 1);
            }
          }
          evt.target.parentElement.parentElement.remove();
          redraw();
          console.log(elements);
        });
        document.querySelector("#liste-elements").append(ligne);

        redraw();
      }
      /**
       * draw datas
       */
      function redraw() {
        var group = document.querySelector("#chart-content");
        group.innerHTML = "";
        var pasAlpha = Math.PI / elements.length;
        var rotateText = elements.length > 6 ? true : false;
        var fontSize = 40;
        elements.map((element, i) => {
          var newg = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "g"
          );
          var xcos = Math.cos(Math.PI / 4);
          var ysin = Math.sin(Math.PI / 4);

          if (i > 0) {
            xcos = Math.cos(pasAlpha * i);
            ysin = Math.sin(pasAlpha * i);

            newg.id = "content-" + i.toString();
            var line = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "line"
            );
            line.setAttribute("x1", 0);
            line.setAttribute("y1", 0);
            line.setAttribute("x2", xcos * 500);
            line.setAttribute("y2", -ysin * 500);
            line.setAttribute("stroke-width", 2);
            line.setAttribute("stroke", "black");
            newg.append(line);
          }
          if (isElementsSeparate) {
            if (i > 0) {
              xcos = Math.cos(pasAlpha * i + 0.01);
              ysin = Math.sin(pasAlpha * i + 0.01);

              line = document.createElementNS(
                "http://www.w3.org/2000/svg",
                "line"
              );
              line.setAttribute("x1", 0);
              line.setAttribute("y1", 0);
              line.setAttribute("x2", xcos * 500);
              line.setAttribute("y2", -ysin * 500);
              line.setAttribute("stroke-width", 2);
              line.setAttribute("stroke", "black");
              newg.append(line);
            }
            if (i < elements.length - 1) {
              //
              xcos = Math.cos(pasAlpha * (i + 1) - 0.01);
              ysin = Math.sin(pasAlpha * (i + 1) - 0.01);

              line = document.createElementNS(
                "http://www.w3.org/2000/svg",
                "line"
              );
              line.setAttribute("x1", 0);
              line.setAttribute("y1", 0);
              line.setAttribute("x2", xcos * 500);
              line.setAttribute("y2", -ysin * 500);
              line.setAttribute("stroke-width", 2);
              line.setAttribute("stroke", "black");
              newg.append(line);
            }
          }

          xcos = Math.cos(pasAlpha * i + 0.5 * pasAlpha);
          ysin = Math.sin(pasAlpha * i + 0.5 * pasAlpha);
          var text = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "text"
          );
          text.setAttribute("text-anchor", "middle");
          if (elements.length > 10) {
            text.setAttribute("font-size", (40 - elements.length).toString());
          } else {
            text.setAttribute("font-size", "40");
          }
          text.innerHTML = element;
          if (rotateText) {
            text.setAttribute("x", 260);
            text.setAttribute("y", -2);
            text.setAttribute(
              "transform",
              "rotate(-" +
                ((pasAlpha * i + 0.25 * pasAlpha) * 180) / Math.PI +
                ",0, 0)"
            );
          } else {
            text.setAttribute("x", xcos * 330);
            text.setAttribute("y", -ysin * 330);
          }

          newg.append(text);

          group.append(newg);
        });
      }
    </script>
  </head>
  <body>
    <h1 style="text-align: center">Chart editor</h1>
    <hr />
    <div class="v-container">
      <div>
        <form>
          <label for="title"><h3>Titre</h3></label><br />
          <input type="text" name="title" id="title" />
          <hr />
          <label for="separator">separateurs</label>
          <input type="checkbox" name="separator" id="separator" />
          <hr />
          <label for="elements"><h3>elements</h3></label><br />
          <input type="text" id="elementValue" name="elementValue" /><button
            type="button"
            name="addValue"
            id="addValue"
          >
            add
          </button>
          <div style="text-align: center">
            <!--  <div id="liste-container"> -->
            <ul id="liste-elements"></ul>
          </div>
          <!--</div> -->
          <hr />
          <input type="button" value="imprimer" id="print-button" />
          <input type="reset" value="clear" id="clear-button" />
        </form>
      </div>
      <div>
        <svg
          viewBox="-510 -510 1020 540"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <circle
            cx="0"
            cy="0"
            r="500"
            style="stroke: black; stroke-width: 2; fill: white"
          />
          <line
            x1="-500"
            y1="0"
            x2="500"
            y2="0"
            stroke="black"
            stroke-width="2"
          />
          <circle cx="0" cy="0" r="30" style="fill: black" />
          <rect
            x="-510"
            y="0"
            width="1020"
            height="60"
            style="stroke: none; fill: white"
          />
          <text
            x="0"
            text-anchor="middle"
            y="20"
            style="stroke: black; font-size: 25"
            id="chart-name"
          ></text>
          <g id="chart-content"></g>
        </svg>
      </div>
    </div>
  </body>
</html>
